name: Reusable Workflow user

on:
  push:

jobs:

  getfolders:
    runs-on: ubuntu-latest
    outputs:
      dirs: ${{ steps.dirs.outputs.test }}

    steps:
        - uses: actions/checkout@v3
        - uses: Stockopedia/action-get-changed-files@v1
          id: get_changed
          with:
            github-token: ${{ secrets.GITHUB_TOKEN }}
            foldersOnly: true # to only include folders in the output
            format: newline # either json, csv or newline
        #- name: Echo
        #  run: echo ${{ steps.get_changed.outputs.changed }}

  docker:
      needs: getfolders
      uses: codeandmedia/A/.github/workflows/main.yml@main
      with:
        image_tag: ${{ github.ref_name }}
        folder: ${{ needs.get_changed.outputs.changed }}